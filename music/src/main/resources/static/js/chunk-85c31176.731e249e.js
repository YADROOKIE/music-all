(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85c31176"],{"0d3c":function(t,e,s){},1276:function(t,e,s){"use strict";var n=s("d784"),i=s("44e7"),a=s("825a"),r=s("1d80"),c=s("4840"),l=s("8aa5"),u=s("50c4"),o=s("14c3"),m=s("9263"),d=s("d039"),h=[].push,f=Math.min,p=4294967295,b=!d((function(){return!RegExp(p,"y")}));n("split",2,(function(t,e,s){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,s){var n=String(r(this)),a=void 0===s?p:s>>>0;if(0===a)return[];if(void 0===t)return[n];if(!i(t))return e.call(n,t,a);var c,l,u,o=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,b=new RegExp(t.source,d+"g");while(c=m.call(b,n)){if(l=b.lastIndex,l>f&&(o.push(n.slice(f,c.index)),c.length>1&&c.index<n.length&&h.apply(o,c.slice(1)),u=c[0].length,f=l,o.length>=a))break;b.lastIndex===c.index&&b.lastIndex++}return f===n.length?!u&&b.test("")||o.push(""):o.push(n.slice(f)),o.length>a?o.slice(0,a):o}:"0".split(void 0,0).length?function(t,s){return void 0===t&&0===s?[]:e.call(this,t,s)}:e,[function(e,s){var i=r(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,i,s):n.call(String(i),e,s)},function(t,i){var r=s(n,t,this,i,n!==e);if(r.done)return r.value;var m=a(t),d=String(this),h=c(m,RegExp),v=m.unicode,g=(m.ignoreCase?"i":"")+(m.multiline?"m":"")+(m.unicode?"u":"")+(b?"y":"g"),w=new h(b?m:"^(?:"+m.source+")",g),x=void 0===i?p:i>>>0;if(0===x)return[];if(0===d.length)return null===o(w,d)?[d]:[];var _=0,y=0,D=[];while(y<d.length){w.lastIndex=b?y:0;var k,C=o(w,b?d:d.slice(y));if(null===C||(k=f(u(w.lastIndex+(b?0:y)),d.length))===_)y=l(d,y,v);else{if(D.push(d.slice(_,y)),D.length===x)return D;for(var S=1;S<=C.length-1;S++)if(D.push(C[S]),D.length===x)return D;y=_=k}}return D.push(d.slice(_)),D}]}),!b)},"2c03":function(t,e,s){"use strict";s("66aa")},"40c9":function(t,e,s){"use strict";s("bec6")},"5a1d":function(t,e,s){"use strict";s("9cec")},"66aa":function(t,e,s){},"9cec":function(t,e,s){},b827:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("div",{staticClass:"albumTop"},[s("img",{attrs:{src:t.albums.blurPicUrl,alt:""}}),s("div",{staticClass:"right"},[s("h3",[s("div",{staticClass:"albumBorder"},[t._v("专辑")]),t._v(" "+t._s(t.albums.name)+" ")]),s("div",{staticClass:"operation"},[s("div",{staticClass:"musicPlay",on:{click:function(e){return t.open(t.allindex)}}},[t._v("播放全部")]),s("div",{staticClass:"collect",on:{click:t.collect}},[t._v(" 收藏("+t._s(t.albumDynamic.subCount)+") ")]),s("div",{staticClass:"share",on:{click:t.share}},[t._v(" 分享("+t._s(t.albumDynamic.shareCount)+") ")])]),s("div",{staticClass:"artists"},[s("p",[t._v("歌手:")]),t._l(t.albums.artists,(function(e,n){return s("p",{key:n,staticClass:"artistsName",on:{click:function(s){return t.enterArtists(e.id)}}},[t._v(" "+t._s(e.name)),n!=t.albums.artists.length-1?s("span",[t._v("/")]):t._e()])}))],2),""!=t.albums.company?s("div",{staticClass:"company"},[t._v(" 发行公司: "+t._s(t.albums.company)+" ")]):t._e(),s("div",{staticClass:"time"},[t._v("时间: "+t._s(t._f("dateFormat")(t.albums.publishTime)))])])]),s("el-menu",{attrs:{"default-active":"1",mode:"horizontal"}},[s("el-menu-item",{attrs:{index:"1"},on:{click:t.showMusicLists}},[t._v("歌曲列表")]),s("el-menu-item",{attrs:{index:"2"},on:{click:t.showDiscuss}},[t._v("评论("+t._s(t.albumDynamic.commentCount)+")")]),s("el-menu-item",{attrs:{index:"3"},on:{click:t.showDesc}},[t._v("专辑详情")])],1),s("AlbumMusicLists",{directives:[{name:"show",rawName:"v-show",value:t.isShowMusicList,expression:"isShowMusicList"}],attrs:{songlist:t.songlist,albumName:t.albumName}}),s("AlbumDiscuss",{directives:[{name:"show",rawName:"v-show",value:t.isShowDiscuss,expression:"isShowDiscuss"}],attrs:{id:t.id-0}}),s("AlbumDesc",{directives:[{name:"show",rawName:"v-show",value:t.isShowDesc,expression:"isShowDesc"}],attrs:{albumDesc:t.albumDesc}})],1)},i=[],a=(s("a4d3"),s("e01a"),s("b0c0"),s("d3b7"),s("ddb0"),s("96cf"),s("1da1")),r=s("1bab");function c(t){return Object(r["a"])({url:"/album",params:{id:t}})}function l(t){return Object(r["a"])({url:"/album/detail/dynamic",params:{id:t}})}function u(t,e){return Object(r["a"])({url:"/comment/album",params:{id:t,offset:20*e}})}var o=s("fba2"),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"discussBox"},[s("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",rows:3,name:"text"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}}),s("el-button",{attrs:{type:"primary"},on:{click:t.open}},[t._v("评论")])],1),t.discussDetail.length>0?s("div",[s("div",{staticClass:"middle"},[t._v("精彩评论")])]):t._e(),t.discussDetail.length>0?s("el-table",{attrs:{data:t.discussDetail,stripe:"","show-header":!1}},[s("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"mainBox"},[s("el-row",[s("el-col",{attrs:{span:1}},[s("img",{attrs:{src:e.row.user.avatarUrl,alt:""}})]),s("el-col",{attrs:{span:23}},[s("div",{staticClass:"dBox"},[s("span",{staticStyle:{color:"rgb(12, 115, 194)"}},[t._v(t._s(e.row.user.nickname)+":")]),s("span",[t._v(t._s(e.row.content))])]),s("div",{staticClass:"timeBox"},[s("span",[t._v(t._s(t._f("dateFormatymdhms")(e.row.time)))])])])],1)],1)]}}],null,!1,1351397388)})],1):s("h3",[t._v("暂无评论")]),s("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.currentPage,total:t.total-0,"page-size":20},on:{"current-change":t.handleCurrentChange}})],1)},d=[],h=(s("a9e3"),{name:"AlbumDiscuss",props:{id:{type:Number,default:function(){return[]}}},data:function(){return{textarea:"",currentPage:1,offset:0,discussDetail:[],pageCount:7,total:""}},created:function(){var t=this;u(this.id,0).then((function(e){t.discussDetail=e.data.comments,t.total=e.data.total}))},methods:{handleCurrentChange:function(t){var e=this;this.currentPage=t,this.offset=this.currentPage-1,u(this.id,this.offset).then((function(t){e.discussDetail=t.data.comments}))},open:function(){this.$message.error("需登录才能发表评论")}}}),f=h,p=(s("2c03"),s("2877")),b=Object(p["a"])(f,m,d,!1,null,"5483b6f2",null),v=b.exports,g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h3",[t._v("专辑介绍")]),t._l(t.formatText(t.albumDesc),(function(e,n){return s("div",{key:n,staticClass:"txt"},[t._v(" "+t._s(e)+" ")])}))],2)},w=[],x=(s("ac1f"),s("1276"),{name:"AlbumDesc",props:{albumDesc:{type:String,default:function(){return[]}}},data:function(){return{}},methods:{formatText:function(t){var e=t.split("\n");return e}}}),_=x,y=(s("5a1d"),Object(p["a"])(_,g,w,!1,null,"51f8e92b",null)),D=y.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.songlist,stripe:"","row-class-name":t.tableRowClassName},on:{"row-dblclick":t.dblopen}},[n("el-table-column",{attrs:{type:"index"}}),n("el-table-column",{attrs:{label:"操作",width:"60px"}},[[n("img",{attrs:{src:s("e050"),alt:""},on:{click:t.collect}})]],2),n("el-table-column",{attrs:{prop:"name",label:"音乐标题"}}),n("el-table-column",{attrs:{prop:"ar",label:"歌手"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.ar,(function(e,s){return n("span",{key:s},[t._v(t._s(e.name))])}))}}])}),n("el-table-column",{attrs:{label:"专辑"}},[t._v(t._s(t.albumName))]),n("el-table-column",{attrs:{prop:"dt",label:"时长"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("dateFormatms")(e.row.dt))+" ")]}}])})],1)],1)},C=[],S=s("0608"),M={name:"AlbumMusicLists",props:{songlist:{type:Array,default:function(){return[]}},albumName:{type:String,default:function(){return[]}}},mixins:[S["a"]],data:function(){return{currentRowIndex:0,musiclist:[]}},methods:{tableRowClassName:function(t){var e=t.row,s=t.rowIndex;e.row_index=s},dblopen:function(t,e,s){var n=this;this.currentRowIndex=t.row_index,this.$confirm("“双击播放”会用当前列表的音乐替换播放列表, 是否继续?","替换播放列表",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((function(){n.$message("音乐缓存需要10~20s，请稍后"),n.$bus.$emit("playingIndex",n.currentRowIndex),n.playMusic(n.currentRowIndex)})).catch((function(){}))},playMusic:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var n,i,a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:e.musiclist=[],s.t0=regeneratorRuntime.keys(e.songlist);case 2:if((s.t1=s.t0()).done){s.next=13;break}return n=s.t1.value,s.next=6,Object(o["h"])(e.songlist[n].id);case 6:i=s.sent,a=i.data,r=new o["k"](a.songs),e.musiclist.push(r),n==e.songlist.length-1&&e.PlayMusic(t),s.next=2;break;case 13:case"end":return s.stop()}}),s)})))()},collect:function(){this.$message.error("需登录才能收藏")}}},$=M,R=(s("e470"),Object(p["a"])($,k,C,!1,null,"c03ae46a",null)),A=R.exports,N={name:"Ablum",components:{AlbumDiscuss:v,AlbumDesc:D,AlbumMusicLists:A},data:function(){return{id:"",albums:[],albumDynamic:[],isShowMusicList:!0,isShowDiscuss:!1,isShowDesc:!1,albumDesc:"",songlist:[],albumName:"",allindex:0}},mixins:[S["a"]],created:function(){var t=this;this.id=this.$route.query.id,c(this.id).then((function(e){t.albums=e.data.album,t.albumDesc=e.data.album.description,t.songlist=e.data.songs,t.albumName=e.data.album.name})),l(this.id).then((function(e){t.albumDynamic=e.data}))},methods:{showMusicLists:function(){this.isShowMusicList=!0,this.isShowDiscuss=!1,this.isShowDesc=!1},showDiscuss:function(){this.isShowMusicList=!1,this.isShowDiscuss=!0,this.isShowDesc=!1},showDesc:function(){this.isShowMusicList=!1,this.isShowDiscuss=!1,this.isShowDesc=!0},enterArtists:function(t){this.$router.push({path:"/artist-list",query:{id:t},name:"ArtistListDetail"})},open:function(t){var e=this;this.$confirm("“播放全部”会替换播放列表, 是否继续?","替换播放列表",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((function(){e.$message("音乐缓存需要10~20s，请稍后"),e.playMusic(t)})).catch((function(){}))},playMusic:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var n,i,a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:e.musiclist=[],s.t0=regeneratorRuntime.keys(e.songlist);case 2:if((s.t1=s.t0()).done){s.next=13;break}return n=s.t1.value,s.next=6,Object(o["h"])(e.songlist[n].id);case 6:i=s.sent,a=i.data,r=new o["k"](a.songs),e.musiclist.push(r),n==e.songlist.length-1&&e.PlayMusic(t),s.next=2;break;case 13:case"end":return s.stop()}}),s)})))()},collect:function(){this.$message.error("需登录才能收藏")},share:function(){this.$message.error("需登录才能分享")}}},L=N,j=(s("40c9"),Object(p["a"])(L,n,i,!1,null,"00fe67ac",null));e["default"]=j.exports},bec6:function(t,e,s){},e470:function(t,e,s){"use strict";s("0d3c")}}]);
//# sourceMappingURL=chunk-85c31176.731e249e.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c1282"],{"459d":function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e._v(" 管理员 "),o("el-button",{on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("添加歌曲")]),o("el-button",{on:{click:function(t){e.dialogRFormVisible=!0}}},[e._v("添加演出")]),o("el-dialog",{attrs:{title:"添加歌曲",visible:e.dialogFormVisible,width:"30%",center:""},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{attrs:{model:e.form}},[o("el-form-item",{attrs:{label:"封面"}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:8080/file/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?o("img",{attrs:{src:e.imageUrl,width:"100px",height:"100px"}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),o("el-form-item",{attrs:{label:"音乐文件"}},[o("el-upload",{staticClass:"upload-demo",attrs:{action:"http://localhost:8080/file/upload","on-success":e.success,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,multiple:"",limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传MP3文件")])],1)],1),o("el-form-item",{attrs:{label:"歌名"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.musicName,callback:function(t){e.$set(e.form,"musicName",t)},expression:"form.musicName"}})],1),o("el-form-item",{attrs:{label:"类型"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1),o("el-form-item",{attrs:{label:"歌手"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.singer,callback:function(t){e.$set(e.form,"singer",t)},expression:"form.singer"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addMusic()}}},[e._v("添加歌曲")])],1)],1),o("el-dialog",{attrs:{title:"添加演出",visible:e.dialogRFormVisible,width:"30%",center:""},on:{"update:visible":function(t){e.dialogRFormVisible=t}}},[o("el-form",{attrs:{model:e.rForm}},[o("el-form-item",{attrs:{label:"封面"}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:8080/file/upload","show-file-list":!1,"on-success":e.handleAvatarSuccessR,"before-upload":e.beforeAvatarUpload}},[e.imageUrlR?o("img",{attrs:{src:e.imageUrlR,width:"100px",height:"100px"}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),o("el-form-item",{attrs:{label:"演出名称"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.rForm.name,callback:function(t){e.$set(e.rForm,"name",t)},expression:"rForm.name"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogRFormVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addTicket()}}},[e._v("添加演出")])],1)],1)],1)},a=[],i=(o("99af"),o("fb6a"),o("b0c0"),o("1bab"));function s(e){return Object(i["a"])({url:"/web/base-music/add",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/share/commodity/rest/add",method:"post",data:e})}var n={data:function(){return{dialogFormVisible:!1,dialogRFormVisible:!1,form:{},rForm:{},formLabelWidth:"120px",fileList:[],imageUrl:null,imageUrlR:null}},methods:{addMusic:function(){var e=this;s(this.form).then((function(t){console.log(t),2e4==t.data.code&&(e.form={},e.imageUrl=null,e.dialogFormVisible=!1,e.fileList=[],e.$message({message:"创建成功",type:"success"}))}))},addTicket:function(){var e=this;r(this.rForm).then((function(t){console.log(t),2e4==t.data.code&&(e.rForm={},e.imageUrlR=null,e.dialogRFormVisible=!1,e.$message({message:"创建成功",type:"success"}))}))},handleRemove:function(e,t){this.form.filePath=null},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},success:function(e,t,o){console.log(e),console.log(e.path.slice(5)),this.form.filePath=e.path.slice(5)},handleAvatarSuccess:function(e,t){console.log(e),this.imageUrl="http://localhost:8080/"+e.path.slice(5),this.form.cover=e.path.slice(5)},handleAvatarSuccessR:function(e,t){console.log(e),this.imageUrlR="http://localhost:8080/"+e.path.slice(5),this.rForm.cover=e.path.slice(5)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,o=e.size/1024/1024<2;return t||this.$message.error("上传图片只能是 JPG 格式!"),o||this.$message.error("上传图片大小不能超过 2MB!"),t&&o}}},c=n,m=o("2877"),u=Object(m["a"])(c,l,a,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0c1282.59bcde26.js.map